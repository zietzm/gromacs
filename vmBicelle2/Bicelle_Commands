;
; GENERATE A LIPID BICELLE DXPC and DTPC
; 19 Mar 2016 by Michael Zietz
; For documentation and explanation, please see Project1.md
;
; To be used with Gromacs 4.65
;

; Start Gromacs
source /usr/local/gromacs/bin/GMXRC

; Box with first lipid
genbox -ci dppc_single.gro -nmol 628 -box 23.9 8.1 20.4 -try 500 -o dppcs.gro
grompp -f minimization.mdp -c dppcs.gro -p lipid.top -maxwarn 10 -o dppc-min.tpr
mdrun -deffnm dppc-min -v



; Laterally replicate bilayer
;genconf -f dppc_bilayer.gro -o double_bilayer.gro -nbox 2 2 1
;grompp -f minimization.mdp -c double_bilayer.gro -p lipid.top -maxwarn 10 -o 1bil.tpr
;mdrun -deffnm 1bil -v

; Add a number of DBPC (self-made according to Jiang)
;genbox -cp doubl



; Box with second lipid solvating the last output
genbox -cp dxpc-min.gro -cs DTPC.gro -o both.gro -maxsol 338 -try 500
grompp -f minimization.mdp -c both.gro -p lipid.top -maxwarn 10 -o both-min.tpr
mdrun -deffnm both-min -v

; Solvate with water
genbox -cp both-min.gro -cs water.gro -o water-lipids.gro -maxsol 768 -vdwd 0.21
grompp -f minimization.mdp -c water-lipids.gro -p lipid.top -maxwarn 10 -o water-lipids-min.tpr
mdrun -deffnm water-lipids-min -v

; Equilibrate the system
grompp -f martini_md.mdp -c water-lipids-min.gro -p lipid.top -maxwarn 10 -o solv-md.tpr
mdrun -deffnm solv-md -v
